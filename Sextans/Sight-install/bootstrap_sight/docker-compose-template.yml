
services:
  graphdb:
    image: ontotext/graphdb:10.8.2
    restart: always
    hostname: graphdb
    ports:
      # - 7200:7200  #no need to expose graphdb here!
    volumes:
      - {PREFIX}-graphdb:/opt/graphdb/home
    networks:
      - graphdb_net
    
  #  This service creates  `[prefix]-sextans-sight` repository in graphdb	
  graph_db_repo_manager:
    build: ./graph-db-repo-manager
    depends_on:
      - graphdb
    environment:
      - "GRAPH_DB_URL=http://graphdb:7200"
      - "GRAPH_DB_ADMIN_USERNAME=admin"
      - "GRAPH_DB_ADMIN_PASSWORD=root"
      - FDP_PREFIX={PREFIX}
    networks:
      - graphdb_net

volumes:
  {PREFIX}-graphdb:
    external: true

networks:
  graphdb_net:
